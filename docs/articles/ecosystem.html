<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OHI Toolbox Ecosystem • OHICORE</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="OHI Toolbox Ecosystem">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">OHICORE</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/getstarted.html">
    <span class="fa fa-play-circle"></span>
     
    Getting Started
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Reference
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/dataprep.html">Data for the Toolbox</a>
    </li>
    <li>
      <a href="../articles/ecosystem.html">Toolbox Ecosystem</a>
    </li>
    <li>
      <a href="../articles/workflow.html">Workflow</a>
    </li>
    <li>
      <a href="../articles/reporting.html">Reporting</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    Changelog
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/faq.html">
    <span class="fa fa-question-circle-o"></span>
     
    FAQ
  </a>
</li>
<li>
  <a href="https://github.com/OHI-Science/ohicore">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>OHI Toolbox Ecosystem</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/OHI-Science/ohicore/blob/master/vignettes/ecosystem.Rmd"><code>vignettes/ecosystem.Rmd</code></a></small>
      <div class="hidden name"><code>ecosystem.Rmd</code></div>

    </div>

    
    
<div id="the-toolbox-ecosystem" class="section level2">
<h2 class="hasAnchor">
<a href="#the-toolbox-ecosystem" class="anchor"></a>The Toolbox Ecosystem</h2>
<p>The Toolbox is a collection of multiple interdependent R scripts and data files, organized in folders and sub-folders, used in calculating Ocean Health Index (OHI) scores. We call it the Toolbox because it consists of a set of discrete, partitioned tools. And we sometimes we refer to the integration of all these as an “ecosystem” since it’s the way the pieces fit together that allows the interesting things to happen, i.e. the score calculation from multiple data layers.</p>
<p><code>ohicore</code> is one of three primary components and is the backbone software package of the Toolbox. The other two overarching components are the assessment repository (or “repo”) itself, and the data preparation. In regional OHI assessments (OHI+), data preparation is done in a subfolder within the assessment repository, and for global assessments, it is in a separate repo. <code>ohicore</code> contains functions to create the ‘conf’ and ‘layers’ objects, check layers, calculate trends, resilience, pressure, and status, and finally to calculate and check the scores.</p>
<p>Bottom line: <code>ohicore</code> is an R package that contains all the core operations for the data preparation and models for your assessment, and it will calculate OHI scores once the Toolbox is configured.</p>
<p><br></p>
<hr>
</div>
<div id="contents-of-an-ohi-repo" class="section level2">
<h2 class="hasAnchor">
<a href="#contents-of-an-ohi-repo" class="anchor"></a>Contents of an OHI Repo</h2>
<p><br></p>
<p><left><img src="https://docs.google.com/drawings/d/e/2PACX-1vRHrcge9f_0pwHgh66Ba8CjDJU4mBRvdGEbwQpNb8iKpdWmXGs0wTRCeYtaTXCi5DxMRRbOUxsDzWUp/pub?w=580&amp;h=674" width="483px"></left></p>
<p><br></p>
<p>An OHI repository or “repo” will contain the following:</p>
<ul>
<li>A data preparation folder, with subfolders for each goal, and pressures and resilience. Note: Global assessments have a separate repository.<br>
</li>
<li>A scenario folder which contains calculate_scores.R, configure_toolbox.R, layers.csv, scores.csv, as well as conf, layers, spatial, and temp subfolders.<br>
</li>
<li>README files in each folder contain more information for the user.<br>
</li>
<li>System files for Git+GitHub or RStudio including .Rproj, .Rhistory, .gitignore, and maybe an .Rbuildignore.</li>
</ul>
<p><br></p>
<p>The “layers” and “conf” subfolders:</p>
<ul>
<li>The ‘layers’ folder contains the csv files that <code>ohicore::Layers</code> and <code><a href="../reference/CheckLayers.html">ohicore::CheckLayers</a></code> take as input<br>
</li>
<li>The ‘conf’ (short for “configuration”) folder contains a config.R script, functions.R, goals.csv, pressures and resilience matrices in csv file format, and a few other things.<br>
</li>
<li>The purpose of the other files in the conf folder is to feed the Toolbox information on the relative weighting/importance of goals or allow adjustments to goal calculation models by regional assessments.</li>
</ul>
<p><br></p>
<hr>
</div>
<div id="configuring-the-toolbox" class="section level2">
<h2 class="hasAnchor">
<a href="#configuring-the-toolbox" class="anchor"></a>Configuring the Toolbox</h2>
<p>Configuring the Toolbox involves running the <code>ohicore</code> functions: <code>Conf()</code>, <code><a href="../reference/CheckLayers.html">CheckLayers()</a></code> and <code>Layers()</code>. In the process of configuring the Toolbox, the <code>layers</code> and <code>conf</code> objects are created. These are in effect <a href="http://r4ds.had.co.nz/lists.html">lists</a> (a special type of R object) of the prepared input data (layers), and everything else (conf) which includes all the information from the following files: config.R, functions.R, goals.csv, pressures_matrix.csv, resilience_matrix.csv, resilience_weights.csv. These two objects are created so that automated checks can be run to confirm that everything is properly prepared and accounted for, and in a consistent format that the ohicore score calculation functions can accept as input.</p>
<p><br></p>
<div class="figure">
<img src="https://docs.google.com/drawings/d/e/2PACX-1vShY-XwjwPj1nJPuEhK1BVS8wFqLb8L37QO4z2DEU42aZNZMBNvmeMJPUFCdVPzBn0noTVgvp6ozvlg/pub?w=789&amp;h=366">
</div>
<p><br></p>
<p>Configuration must be done each time models are edited or additional data is added to the data layers, prior to (re)calculating scores; i.e. if you have made changes to functions.R, goals.csv, or other files that become part of the <code>layers</code> or <code>conf</code> objects.</p>
<p><br></p>
<hr>
<p><strong>Ensure files are properly configured:</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## set working directory to the scenario folder (that contains the conf folder)
<span class="kw">setwd</span>(<span class="st">'eez'</span>)

## load scenario configuration
conf &lt;-<span class="st"> </span>ohicore<span class="op">::</span><span class="kw">Conf</span>(<span class="st">'conf'</span>)

## check that scenario layers files in the \layers folder match layers.csv registration 
## (layers files are not modified)
ohicore<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ohicore/topics/CheckLayers">CheckLayers</a></span>(<span class="st">'layers.csv'</span>, <span class="st">'layers'</span>, <span class="dt">flds_id =</span> conf<span class="op">$</span>config<span class="op">$</span>layers_id_fields)

## load scenario layers for ohicore to access (layers files are not modified)
layers &lt;-<span class="st"> </span>ohicore<span class="op">::</span><span class="kw">Layers</span>(<span class="st">'layers.csv'</span>, <span class="st">'layers'</span>)

## select scenario year for the assessment
scenario_years &lt;-<span class="st"> </span><span class="dv">2016</span>
layers<span class="op">$</span>data<span class="op">$</span>scenario_year &lt;-<span class="st"> </span>scenario_years</code></pre></div>
<hr>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#the-toolbox-ecosystem">The Toolbox Ecosystem</a></li>
      <li><a href="#contents-of-an-ohi-repo">Contents of an OHI Repo</a></li>
      <li><a href="#configuring-the-toolbox">Configuring the Toolbox</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Melanie Frazier, Ben Best, Julia Stewart Lowndes, Casey O'Hara, Ning Jiang Mendes, Jamie Afflerbach, Steve Hastings, Darren Hardy.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
